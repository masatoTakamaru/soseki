<%= provide :title, t("title.item.index") %>

<div class="container">

<h2>
  <div class="flex items-center">
    <%= t("title.item.index") %>
    <%= @sheet[:period_text] %>
  </div>
</h2>

<div class="flex justify-between items-center mb-2">
  <% unless @sheet[:belongs] == 0 %>
    <p class="font-bold"><%= t("student.index.students_amount") %> : <span><%= @sheet[:belongs] %></span><%= t("student.index.people") %></p>
    <div class="flex">
      <p class="mr-2"><%= t("student.sort") %></p>
      <% if params[:class_name] == "asc" %>
        <p class="mx-2"><%= link_to t("student.class_name"), item_sheet_path(class_name: "desc") %></p>
      <% elsif params[:class_name] == "desc" || params[:class_name].nil? %>
        <p class="mx-2"><%= link_to t("student.class_name"), item_sheet_path(class_name: "asc") %></p>
      <% end %>
      <% if params[:grade] == "asc" %>
        <p class="mx-2"><%= link_to t("student.grade"), item_sheet_path(grade: "desc") %></p>
      <% elsif params[:grade] == "desc" || params[:grade].nil? %>
        <p class="mx-2"><%= link_to t("student.grade"), item_sheet_path(grade: "asc") %></p>
      <% end %>
    </div>
  <% end %>
  <%= link_to "戻る", dashboard_path, class: "btn btn-cancel py-2 px-4" %>
</div>

<div class="table-frame mb-20 bg-white">
<table class="w-full my-4">
<thead>
<tr class="text-85">
  <th><%= t("student.class_name") %></th>
  <th><%= t("student.name") %></th>
  <th><%= t("student.kana") %></th>
  <th><%= t("student.grade") %></th>
  <th><%= t("item.price_total") %></th>
</tr>
</thead>
<tbody>
<% @sheet[:students].each do |student| %>
  <tr>
    <td class="pl-8"><%= student[:class_name] %></td>
    <td class="font-bold underline pr-2">
      <%= link_to student[:name], item_bill_path(student_id: student[:student_id]), class: "text-blue-500" %>
    </td>
    <td class="pr-2"><%= student[:kana] %></td>
    <td class="pr-2"><%= student[:grade_name] %></td>
    <td class="pr-8 text-right">
      <%= student[:total] %>
    </td>
  </tr>
<% end %>
</tbody>
</table>
<div class="flex justify-end pr-8 mb-4">
  <p>計 <%= @sheet[:total] %></p>
</div>
</div>

</div>

